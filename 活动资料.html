<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>协会——活动资料</title>
  <link rel="stylesheet" href="css/header.css" type="text/css" media="all"/>
  <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" media="all" />
  <link href="https://bootstrap.ac.cn/docs/5.3/assets/css/docs.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css" type="text/css" media="all" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="56x56" href="assets/images/fav-icon/icon.png">
  <!-- bootstrap CSS -->
  <link href="//fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="//fonts.googleapis.com/css2?family=Halant:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="//fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <script src="assets/js/theme-change.js"></script>
  <script src="assets/js/bootstrap.min.js"></script>
  <script src="assets/js/jquery-3.3.1.min.js"></script>
  <script src="assets/js/slideshow-slider.js"></script>
  <script src="assets/js/counter.js"></script>
  <script src="assets/js/owl.carousel.js"></script>
  <link rel="stylesheet" href="css/style-starter.css">
  <style>
    /* 密码输入模态框样式 */
    .password-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }
    
    .password-modal-content {
      background-color: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      width: 90%;
      max-width: 400px;
    }
    
    .password-modal h3 {
      margin-bottom: 15px;
      color: #2c3e50;
    }
    
    .password-input {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 16px;
    }
    
    .password-buttons {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }
    
    .password-btn {
      padding: 8px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }
    
    .password-confirm {
      background-color: #3498db;
      color: white;
    }
    
    .password-cancel {
      background-color: #e0e0e0;
      color: #333;
    }
    
    .password-error {
      color: #e74c3c;
      font-size: 14px;
      margin-top: 5px;
      display: none;
    }
    
    /* 锁图标样式 */
    .locked-link {
      position: relative;
      padding-left: 20px;
    }
    
    .locked-link:before {
      content: "🔒";
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
    }
    
    /* 搜索相关样式 */
    .search-highlight {
      background-color: yellow;
      font-weight: bold;
    }
    
    .no-results {
      text-align: center;
      padding: 20px;
      color: #7f8c8d;
      font-style: italic;
    }
    
    .search-info {
      margin-top: 10px;
      font-size: 14px;
      color: #7f8c8d;
    }
  </style>
</head>
<body>

<!-- 密码输入模态框 -->
<div id="passwordModal" class="password-modal">
  <div class="password-modal-content">
    <h3>请输入访问密码</h3>
    <input type="password" id="passwordInput" class="password-input" placeholder="请输入密码">
    <div id="passwordError" class="password-error">密码错误，请重试</div>
    <div class="password-buttons">
      <button id="passwordCancel" class="password-btn password-cancel">取消</button>
      <button id="passwordConfirm" class="password-btn password-confirm">确认</button>
    </div>
  </div>
</div>

<header class="container-fluid" id="header" style="position: absolute;">
  <!-- 头部内容保持不变 -->
  <div class="headerl fixed-top ">
    <div class="top "></div>
    <div class="">
      <a href="./主页.html" class=""><img src="picture/协会标.png" alt="协会标" class="img_1"></a>
      <a href="./主页.html" class=""><div class="picture_right ">烟台大学电子信息协会</div></a>

      <div class=" right_picture">
        <button class="btn ce" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasWithBothOptions" aria-controls="offcanvasWithBothOptions">
          <div class="xian" style="margin-bottom: 7px;margin-top: 7px"></div>
          <div class="xian" ></div>
          <div class="xian" style="margin-top: 7px;margin-bottom: 7px"></div></button>
        <div class="cont-ser-position">
          <nav class="navigation">
            <div class="theme-switch-wrapper">
              <label class="theme-switch" for="checkbox">
                <input type="checkbox" id="checkbox">
                <div class="mode-container">
                  <i class="gg-sun"></i>
                  <i class="gg-moon"></i>
                </div>
              </label>
            </div>
          </nav>
        </div>
        <div class="offcanvas offcanvas-end" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions" aria-labelledby="offcanvasWithBothOptionsLabel" style="width: 35%; height: 100%;">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel">Backdrop with scrolling</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <p>Try scrolling the rest of the page to see this option in action.</p>
            <div class="container text-center" >
              <div class="row">
                <div class="col">
                  <div class="dropdown-toggle " style="font-weight: bold;" data-bs-placement="right" data-bs-toggle="tooltip"
                      data-bs-title="部门设置">
                    部门设置
                  </div>
                  <div class="col_2" style="background-color:#fff;">
                    <div style="width: auto;height: 2px;background-color: orange;box-sizing: border-box;"></div>
                    <div class="btn-group-vertical" role="group" aria-label="Vertical button group">
                      <button type="button" class="btn "><a href="软件部.html" style="text-decoration: none;color: #7A4EC2;">软件部</a></button>
                      <button type="button" class="btn "><a href="硬件部.html" style="text-decoration: none;color: #7A4EC2">硬件部</a></button>
                      <button type="button" class="btn "><a href="传媒部.html" style="text-decoration: none;color: #7A4EC2">传媒部</a></button>
                      <button type="button" class="btn "><a href="物理部.html" style="text-decoration: none;color: #7A4EC2">物理部</a></button>
                    </div>
                  </div>
                </div>
                <div class="col">
                  <div class="dropdown-toggle " style="font-weight: bold;" data-bs-placement="right" data-bs-toggle="tooltip"
                      data-bs-title="部门设置">
                    资源
                  </div>
                  <div class="col_2" style="background-color:#fff;">
                    <div style="width: auto;height: 2px;background-color: orange;box-sizing: border-box;"></div>
                    <div class="btn-group-vertical" role="group" aria-label="Vertical button group">
                      <button type="button" class="btn "><a href="专业课资料.html" style="text-decoration: none;color: #7A4EC2;">专业课资料</a></button>
                      <button type="button" class="btn "><a href="各部门资料.html" style="text-decoration: none;color: #7A4EC2">部门</a></button>
                      <button type="button" class="btn "><a href="活动资料.html" style="text-decoration: none;color: #7A4EC2">活动</a></button>
                      <button type="button" class="btn "><a href="竞赛资料.html" style="text-decoration: none;color: #7A4EC2">竞赛</a></button>
                    </div>
                  </div>
                </div>
                <div class="col ">交流</div>
                <a href="走进电协.html" class="col"><div class="col">走进电协</div></a>
                <a href="frontend.html" class="col login-link" style="color: #FFFFFF"><div class="col">登录</div></a>

              </div>
            </div>
          </div>
        </div>
      </div>



    </div>
    <div class="picture_left">
      <div class="container text-center container_122" >
        <div class="row">
          <div class="col-2"></div>
          <div class="col">
            <div class="dropdown-toggle " style="font-weight: bold;" data-bs-placement="right" data-bs-toggle="tooltip"
                data-bs-title="部门设置">
              部门设置
            </div>
            <div class="col_1 " style="background-color:#fff;font-size: 20px">
              <div style="width: auto;height: 2px;background-color: orange;box-sizing: border-box;"></div>
              <div class="btn-group-vertical" role="group" aria-label="Vertical button group">
                <button type="button" class="btn "><a href="软件部.html" style="text-decoration: none;color: #7A4EC2;">软件部</a></button>
                <button type="button" class="btn "><a href="硬件部.html" style="text-decoration: none;color: #7A4EC2">硬件部</a></button>
                <button type="button" class="btn "><a href="传媒部.html" style="text-decoration: none;color: #7A4EC2">传媒部</a></button>
                <button type="button" class="btn "><a href="物理部.html" style="text-decoration: none;color: #7A4EC2">物理部</a></button>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="dropdown-toggle " style="font-weight: bold;" data-bs-placement="right" data-bs-toggle="tooltip"
                data-bs-title="部门设置">
              资源
            </div>
            <div class="col_1 " style="background-color:#fff;">
              <div style="width: auto;height: 2px;background-color: orange;box-sizing: border-box;"></div>
              <div class="btn-group-vertical" role="group" aria-label="Vertical button group">
                <button type="button" class="btn "><a href="专业课资料.html" style="text-decoration: none;color: #7A4EC2;">专业课资料</a></button>
                <button type="button" class="btn "><a href="各部门资料.html" style="text-decoration: none;color: #7A4EC2">各部门资料</a></button>
                <button type="button" class="btn "><a href="活动资料.html" style="text-decoration: none;color: #7A4EC2">活动资料</a></button>
                <button type="button" class="btn "><a href="竞赛资料.html" style="text-decoration: none;color: #7A4EC2">竞赛资料</a></button>
              </div>
            </div>
          </div>
          <div class="col">交流合作</div>
          <a href="走进电协.html" class="col" style="color: #FFFFFF"><div class="col">走进电协</div></a>
          <a href="frontend.html" class="col login-link" style="color: #FFFFFF"><div class="col">登录</div></a>
        </div>
      </div>

    </div>
</header>

<section class="inner-banner" style="background-image:url('assets/images_1/img3.jpg') ">
  <div class="w3l-breadcrumb py-5">
    <div class="container py-lg-5 py-sm-4 mt-5">
      <h4 class="inner-text-title font-weight-bold mb-2">资料库</h4>
      <ul class="breadcrumbs-custom-path">
        <li><a href="主页.html">首页</a></li>
        <li class="active"><span class="fa fa-chevron-right mx-2" aria-hidden="true"></span>活动资料</li>
      </ul>
    </div>
  </div>
</section>

<div class="container">
  <div class="row mt-5">
    <div class="col-md-8 offset-md-2">
      <div class="input-group mb-3">
        <input type="text" class="form-control" id="searchInput" placeholder="请输入关键词搜索资料..." aria-label="搜索资料">
        <button class="btn btn-primary" type="button" id="searchButton">搜索</button>
        <button class="btn btn-outline-secondary" type="button" id="clearSearch">清除</button>
      </div>
      <div class="search-info" id="searchInfo">输入关键词搜索资料，支持科目名称、描述等</div>
    </div>
  </div>
</div>

<section class="container">
  <div class="table-responsive">
    <table class="table align-middle" id="dataTable">
      <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">科目</th>
        <th scope="col">描述</th>
        <th scope="col">下载</th>
      </tr>
      </thead>
      <tbody class="table-group-divider" id="tableBody">
        <!-- 数据将通过JavaScript动态生成 -->
      </tbody>
    </table>
    <div id="noResults" class="no-results" style="display: none;">
      没有找到匹配的资料，请尝试其他关键词
    </div>
  </div>
</section>

<div style="height: 30px"></div>
<div style="height: 30px"></div>
<div style="height: 30px"></div>
<section class="footer-17">
  <div class="footer17-sub pt-3">
    <div class="bot" style="z-index: -1">
      <div class="container py-4">
        <div class="text-md-start">
          
          <a class="footer-logo" href="主页.html">烟台大学电子信息协会</a>
        </div>
      </div>
      <div class="copyright text-center">
        <div class="container">
          <p class="copy-footer-29">© 2025/4/24维护更新 版权所有</p>
          <p class="copy-footer-29">联系地址: 烟台大学化学馆北109/北112</p>
          <p class="copy-footer-29">官方QQ: 3300200063</p>
          <div style="color:gray; background-color:gray;height: 2px;width: 1200px;position: relative;bottom:-30px;right: 0px;opacity: 0.7"></div>
        </div>
      </div>
    </div>
  </div>
</section>
<div class="scroll-area">
    <div class="top-wrap">
        <div class="go-top-btn-wraper">
            <div class="go-top go-top-button">
                <i class="flaticon-up-arrow-1"></i>
                <i class="flaticon-up-arrow-1"></i>
            </div>
        </div>
    </div>
</div>
</body>
<script>
  // 示例数据 - 实际应用中可以从服务器获取
  const tableData = [
    { id: 1, subject: "C语言程序设计", description: "基础C语言教程与实验指导", link: "https://baidu.com", password: "123456" },
    { id: 2, subject: "数据结构", description: "常用数据结构与算法实现", link: "https://google.com", password: "abcdef" },
    { id: 3, subject: "电路分析", description: "电路基础理论与实验", link: "https://github.com", password: "ytdx2024" },
    { id: 4, subject: "数字逻辑", description: "数字电路与逻辑设计", link: "https://example.com", password: "dianxie123" },
    { id: 5, subject: "单片机原理", description: "51单片机开发与应用", link: "https://example2.com", password: "mcu456" },
    { id: 6, subject: "嵌入式系统", description: "ARM嵌入式开发指南", link: "https://example3.com", password: "embedded789" },
    { id: 7, subject: "Python编程", description: "Python基础与数据分析", link: "https://example4.com", password: "python2024" },
    { id: 8, subject: "Web前端开发", description: "HTML/CSS/JavaScript教程", link: "https://example5.com", password: "web123" }
  ];

  // 初始化表格数据
  function initializeTable() {
    const tableBody = document.getElementById('tableBody');
    tableBody.innerHTML = '';
    
    tableData.forEach(item => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <th scope="row">${item.id}</th>
        <td>${item.subject}</td>
        <td>${item.description}</td>
        <td><a href="${item.link}" class="password-protected locked-link" data-password="${item.password}">下载链接${item.id}</a></td>
      `;
      tableBody.appendChild(row);
    });
    
    // 重新绑定密码保护事件
    bindPasswordEvents();
  }

  // 搜索功能
  function performSearch() {
    const searchTerm = document.getElementById('searchInput').value.trim().toLowerCase();
    const tableBody = document.getElementById('tableBody');
    const noResults = document.getElementById('noResults');
    const searchInfo = document.getElementById('searchInfo');
    
    if (searchTerm === '') {
      initializeTable();
      searchInfo.textContent = '输入关键词搜索资料，支持科目名称、描述等';
      noResults.style.display = 'none';
      return;
    }
    
    // 过滤数据
    const filteredData = tableData.filter(item => 
      item.subject.toLowerCase().includes(searchTerm) || 
      item.description.toLowerCase().includes(searchTerm)
    );
    
    // 更新表格
    tableBody.innerHTML = '';
    
    if (filteredData.length > 0) {
      filteredData.forEach(item => {
        const row = document.createElement('tr');
        
        // 高亮匹配的关键词
        const highlightedSubject = highlightText(item.subject, searchTerm);
        const highlightedDescription = highlightText(item.description, searchTerm);
        
        row.innerHTML = `
          <th scope="row">${item.id}</th>
          <td>${highlightedSubject}</td>
          <td>${highlightedDescription}</td>
          <td><a href="${item.link}" class="password-protected locked-link" data-password="${item.password}">下载链接${item.id}</a></td>
        `;
        tableBody.appendChild(row);
      });
      
      noResults.style.display = 'none';
      searchInfo.textContent = `找到 ${filteredData.length} 条匹配结果`;
    } else {
      noResults.style.display = 'block';
      searchInfo.textContent = '没有找到匹配的资料';
    }
    
    // 重新绑定密码保护事件
    bindPasswordEvents();
  }

  // 高亮文本函数
  function highlightText(text, searchTerm) {
    if (!searchTerm) return text;
    
    const regex = new RegExp(`(${escapeRegExp(searchTerm)})`, 'gi');
    return text.replace(regex, '<span class="search-highlight">$1</span>');
  }

  // 转义正则表达式特殊字符
  function escapeRegExp(string) {
    return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
  }

  // 清除搜索
  function clearSearch() {
    document.getElementById('searchInput').value = '';
    performSearch();
  }

  // 绑定密码保护事件
  function bindPasswordEvents() {
    const protectedLinks = document.querySelectorAll('.password-protected');
    
    protectedLinks.forEach(link => {
      // 移除现有的事件监听器
      link.replaceWith(link.cloneNode(true));
    });
    
    // 重新绑定事件
    const newProtectedLinks = document.querySelectorAll('.password-protected');
    newProtectedLinks.forEach(link => {
      link.addEventListener('click', function(event) {
        event.preventDefault();
        currentLink = this;
        
        // 显示密码输入模态框
        passwordModal.style.display = 'flex';
        passwordInput.value = '';
        passwordError.style.display = 'none';
        passwordInput.focus();
      });
    });
  }

  // 页面加载完成后初始化
  document.addEventListener('DOMContentLoaded', function() {
    // 初始化表格
    initializeTable();
    
    // 搜索相关事件绑定
    document.getElementById('searchButton').addEventListener('click', performSearch);
    document.getElementById('clearSearch').addEventListener('click', clearSearch);
    
    // 回车键搜索
    document.getElementById('searchInput').addEventListener('keypress', function(event) {
      if (event.key === 'Enter') {
        performSearch();
      }
    });
    
    // 实时搜索（可选，添加防抖）
    let searchTimeout;
    document.getElementById('searchInput').addEventListener('input', function() {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(performSearch, 300);
    });
    
    // 登录状态检查功能
    const loginLinks = document.querySelectorAll('.login-link');
    
    loginLinks.forEach(link => {
      link.addEventListener('click', function(event) {
        const token = localStorage.getItem('token');
        if (token) {
          event.preventDefault();
          alert('您已经登录，无需再次登录！');
        }
      });
    });
    
    // 页面加载时检查登录状态
    checkLoginStatus();
  });

  // 检查登录状态并更新页面显示
  function checkLoginStatus() {
    const token = localStorage.getItem('token');
    const loginLinks = document.querySelectorAll('.login-link');
    
    if (token) {
      loginLinks.forEach(link => {
        link.innerHTML = '<div class="col">已登录</div>';
        link.href = 'javascript:void(0);';
        link.title = '点击退出登录';
        
        link.addEventListener('click', function(event) {
          event.preventDefault();
          if (confirm('确定要退出登录吗？')) {
            localStorage.removeItem('token');
            location.reload();
          }
        });
      });
    }
  }

  // 链接密码保护功能
  let currentLink = null;
  const passwordModal = document.getElementById('passwordModal');
  const passwordInput = document.getElementById('passwordInput');
  const passwordConfirm = document.getElementById('passwordConfirm');
  const passwordCancel = document.getElementById('passwordCancel');
  const passwordError = document.getElementById('passwordError');
  
  // 确认按钮点击事件
  passwordConfirm.addEventListener('click', function() {
    const enteredPassword = passwordInput.value.trim();
    const correctPassword = currentLink.getAttribute('data-password');
    
    if (enteredPassword === correctPassword) {
      passwordModal.style.display = 'none';
      window.open(currentLink.href, '_blank');
    } else {
      passwordError.style.display = 'block';
      passwordInput.focus();
    }
  });
  
  // 取消按钮点击事件
  passwordCancel.addEventListener('click', function() {
    passwordModal.style.display = 'none';
    currentLink = null;
  });
  
  // 按回车键确认
  passwordInput.addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
      passwordConfirm.click();
    }
  });
  
  // 点击模态框背景关闭
  passwordModal.addEventListener('click', function(event) {
    if (event.target === passwordModal) {
      passwordModal.style.display = 'none';
      currentLink = null;
    }
  });

  // 窗口大小调整处理
  const clien = document.documentElement.clientWidth;
  
  function debounce(func, delay = 20) {
    let timeoutId;
    return function() {
      clearTimeout(timeoutId);
      timeoutId = setTimeout(func, delay);
    };
  }
  
  window.addEventListener('resize', debounce(function() {
    if (window.innerWidth <= 900) {
      document.querySelector('.container_122').style.display = 'none';
    } else {
      document.querySelector('.container_122').style.display = 'block';
    }
  }));
</script>
</html>